<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MetaSearch ‚Äî Clearnet + .onion (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)</title>
  <style>
    :root { --bg:#0b0f14; --panel:#111722; --ring:#223149; --text:#eef3ff; --muted:#8fa5c3; --accent:#8ab4ff; --accent2:#7ee787 }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:radial-gradient(1200px 600px at 10% -10%, rgba(138,180,255,.08), transparent 60%),radial-gradient(900px 600px at 90% 10%, rgba(126,231,135,.08), transparent 60%),var(--bg);color:var(--text);font:500 16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Arial}
    header{position:sticky;top:0;z-index:5;backdrop-filter:blur(8px);background:linear-gradient(180deg,rgba(11,15,20,.92),rgba(11,15,20,.65));border-bottom:1px solid var(--ring)}
    .wrap{max-width:1200px;margin:0 auto;padding:16px 20px}
    h1{margin:0 0 4px;font-weight:900;letter-spacing:.2px;font-size:22px}
    .sub{color:var(--muted);font-size:13px}
    main .wrap{display:grid;grid-template-columns:1.2fr .8fr;gap:18px}
    @media (max-width:980px){ main .wrap{grid-template-columns:1fr} }
    .card{background:linear-gradient(180deg,rgba(17,23,34,.86),rgba(17,23,34,.94));border:1px solid var(--ring);border-radius:14px;padding:14px}
    .card h2{margin:0 0 10px;font-size:15px;text-transform:uppercase;letter-spacing:.7px;color:var(--accent)}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    input[type=text], select{background:#0f141c;color:var(--text);border:1px solid #233045;border-radius:10px;padding:10px 12px;outline:none;min-width:0;box-shadow:0 0 0 2px transparent inset;transition:.2s}
    input[type=text]:focus, select:focus{border-color:#39527a;box-shadow:0 0 0 2px rgba(138,180,255,.25) inset}
    button{background:linear-gradient(180deg,#1d2838,#131c29);color:var(--text);border:1px solid #2c3b52;border-radius:12px;padding:10px 14px;font-weight:800;cursor:pointer;transition:.2s}
    button:hover{transform:translateY(-1px)}
    label.chip{display:inline-flex;align-items:center;gap:8px;background:#0e1520;border:1px solid #203047;padding:8px 10px;border-radius:999px;font-size:13px}
    .hint{color:var(--muted);font-size:12px}
    .sites{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
    @media (max-width:560px){ .sites{grid-template-columns:1fr} }
    .sitebox{background:#0e141b;border:1px solid #223049;border-radius:12px;padding:10px}
    .sitebox h3{margin:0 0 6px;font-size:14px;color:var(--accent2)}
    .sitebox ul{margin:0;padding-left:18px}
    .sitebox li{margin:4px 0}
    a{color:var(--accent);text-decoration:none}
    a:hover{text-decoration:underline}
    .kbd{font:700 12px ui-monospace,Menlo,Consolas,monospace;background:#0b111a;border:1px solid #243146;padding:2px 6px;border-radius:6px}
    .warn{border-color:#5a2b2b;background:#1a0f12}
    .small{font-size:12px}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>MetaSearch ‚Ä¢ –ï–¥–∏–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)</h1>
      <div class="sub">–§–æ—Ä–º–∞ –ø–æ–∏—Å–∫–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–∞ –Ω–∞ submit (Enter —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥—ë–∂–Ω–æ). –°–ø—Ä–∞–≤–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å–∞–π—Ç–æ–≤ –¥–ª—è –ø—Ä—è–º—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤.</div>
    </div>
  </header>

  <main>
    <div class="wrap">
      <section class="card" aria-label="–ü–æ–∏—Å–∫–æ–≤–∞—è —Ñ–æ—Ä–º–∞">
        <h2>–ü–æ–∏—Å–∫</h2>
        <form id="searchForm" class="row" autocomplete="on">
          <input id="q" type="text" placeholder="–ó–∞–ø—Ä–æ—Å (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç: &quot;—Ç–æ—á–Ω–∞—è —Ñ—Ä–∞–∑–∞&quot;, -–∏—Å–∫–ª—é—á–∏—Ç—å, site:, filetype:)" style="flex:1 1 420px" />
          <button id="go" type="submit">–ò—Å–∫–∞—Ç—å ‚èé</button>
        </form>
        <div class="row" style="margin-top:8px">
          <input id="site" type="text" placeholder="site: –ø—Ä–∏–º–µ—Ä.com (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)" />
          <select id="filetype" title="filetype">
            <option value="">filetype: ‚Äî –ª—é–±–æ–π</option>
            <option>pdf</option><option>doc</option><option>docx</option>
            <option>ppt</option><option>pptx</option>
            <option>xls</option><option>xlsx</option>
            <option>csv</option><option>txt</option><option>zip</option>
          </select>
          <input id="exclude" type="text" placeholder="-–∏—Å–∫–ª—é—á–∏—Ç—å —Å–ª–æ–≤–∞ (—á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª)" />
        </div>
        <div class="row" style="margin-top:8px;align-items:center">
          <label class="chip"><input id="exact" type="checkbox" /> —Ç–æ—á–Ω–∞—è —Ñ—Ä–∞–∑–∞</label>
          <label class="chip"><input id="newtabs" type="checkbox" checked /> –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –≤ –Ω–æ–≤—ã—Ö –≤–∫–ª–∞–¥–∫–∞—Ö</label>
          <label class="chip"><input id="firstHere" type="checkbox" /> –ø–µ—Ä–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —ç—Ç–æ–π –≤–∫–ª–∞–¥–∫–µ (–æ–±—Ö–æ–¥ –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∞)</label>
        </div>
        <p class="hint" style="margin-top:8px">–ï—Å–ª–∏ –≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ –æ–∫–Ω–∞ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è ‚Äî –≤–∫–ª—é—á–∏—Ç–µ –æ–ø—Ü–∏—é ¬´–ø–µ—Ä–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —ç—Ç–æ–π –≤–∫–ª–∞–¥–∫–µ¬ª.</p>
      </section>

      <aside class="card" aria-label="–ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–∞–π—Ç—ã">
        <h2>–°–ø–∏—Å–æ–∫ —Å–∞–π—Ç–æ–≤</h2>
        <div class="sites">
          <div class="sitebox">
            <h3>Web (clearnet)</h3>
            <ul>
              <li><a href="https://www.google.com/" target="_blank" rel="noopener">Google</a></li>
              <li><a href="https://duckduckgo.com/" target="_blank" rel="noopener">DuckDuckGo</a></li>
              <li><a href="https://search.brave.com/" target="_blank" rel="noopener">Brave Search</a></li>
              <li><a href="https://www.bing.com/" target="_blank" rel="noopener">Bing</a></li>
              <li><a href="https://www.qwant.com/" target="_blank" rel="noopener">Qwant</a></li>
              <li><a href="https://www.mojeek.com/" target="_blank" rel="noopener">Mojeek</a></li>
              <li><a href="https://www.ecosia.org/" target="_blank" rel="noopener">Ecosia</a></li>
            </ul>
          </div>
          <div class="sitebox">
            <h3>–ó–Ω–∞–Ω–∏—è / –∫–æ–¥</h3>
            <ul>
              <li><a href="https://scholar.google.com/" target="_blank" rel="noopener">Google Scholar</a></li>
              <li><a href="https://ru.wikipedia.org/" target="_blank" rel="noopener">Wikipedia (RU)</a></li>
              <li><a href="https://stackoverflow.com/" target="_blank" rel="noopener">Stack Overflow</a></li>
              <li><a href="https://github.com/" target="_blank" rel="noopener">GitHub</a></li>
            </ul>
          </div>
          <div class="sitebox">
            <h3>–ê—Ä—Ö–∏–≤—ã</h3>
            <ul>
              <li><a href="https://archive.org/" target="_blank" rel="noopener">Internet Archive</a></li>
              <li><a href="https://web.archive.org/" target="_blank" rel="noopener">Wayback Machine</a></li>
            </ul>
          </div>
          <div class="sitebox">
            <h3>.onion (Tor)</h3>
            <ul>
              <li><a href="https://ahmia.fi/" target="_blank" rel="noopener">Ahmia (clearnet ‚Üí .onion –∏–Ω–¥–µ–∫—Å)</a></li>
              <li><span class="small">–ü—Ä—è–º–æ–π .onion: </span><br><a href="http://juhanurmihxlp77zqz2z6fep7zsns5nuyc6vhticrwaymzl4csyd.onion/" target="_blank" rel="noopener">Ahmia (.onion)</a></li>
            </ul>
            <p class="small" style="margin-top:6px">üßÖ –û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ .onion –≤ <a href="https://www.torproject.org/download/" target="_blank" rel="noopener">Tor Browser</a>.</p>
          </div>
        </div>
        <div class="card warn small" style="margin-top:10px">‚ö†Ô∏è –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–æ—Å—Ç—É–ø –∫ .onion –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–∫–æ–Ω–∞ –≤–∞—à–µ–π —Å—Ç—Ä–∞–Ω—ã. –ú—ã –Ω–µ –ø–æ–º–æ–≥–∞–µ–º –≤ –ø—Ä–æ—Ç–∏–≤–æ–ø—Ä–∞–≤–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.</div>
      </aside>

      <section class="card" style="grid-column:1 / -1" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–≤–∏–∂–∫–æ–≤">
        <h2>–ß—Ç–æ –∏–º–µ–Ω–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å</h2>
        <div class="row">
          <label class="chip"><input type="checkbox" data-eng="google" checked /> Google</label>
          <label class="chip"><input type="checkbox" data-eng="ddg" checked /> DuckDuckGo</label>
          <label class="chip"><input type="checkbox" data-eng="brave" checked /> Brave</label>
          <label class="chip"><input type="checkbox" data-eng="bing" /> Bing</label>
          <label class="chip"><input type="checkbox" data-eng="qwant" /> Qwant</label>
          <label class="chip"><input type="checkbox" data-eng="mojeek" /> Mojeek</label>
          <label class="chip"><input type="checkbox" data-eng="ecosia" /> Ecosia</label>
          <label class="chip"><input type="checkbox" data-eng="ahmia" checked /> Ahmia (clearnet)</label>
          <label class="chip"><input type="checkbox" data-eng="ahmia_onion" /> Ahmia (.onion)</label>
        </div>
      </section>

    </div>
  </main>

  <script>
  const ENGINES = {
    google: { name:'Google', url:'https://www.google.com/search?q={q}' },
    ddg:    { name:'DuckDuckGo', url:'https://duckduckgo.com/?q={q}' },
    brave:  { name:'Brave', url:'https://search.brave.com/search?q={q}' },
    bing:   { name:'Bing', url:'https://www.bing.com/search?q={q}' },
    qwant:  { name:'Qwant', url:'https://www.qwant.com/?q={q}' },
    mojeek: { name:'Mojeek', url:'https://www.mojeek.com/search?q={q}' },
    ecosia: { name:'Ecosia', url:'https://www.ecosia.org/search?q={q}' },
    ahmia:  { name:'Ahmia (clearnet ‚Üí .onion)', url:'https://ahmia.fi/search/?q={q}' },
    ahmia_onion: { name:'Ahmia (.onion)', url:'http://juhanurmihxlp77zqz2z6fep7zsns5nuyc6vhticrwaymzl4csyd.onion/search/?q={q}', onion:true }
  };

  const $ = s => document.querySelector(s);
  const $$ = s => Array.from(document.querySelectorAll(s));

  function buildQuery(raw){
    let q = raw.trim();
    const site = document.getElementById('site').value.trim();
    const ft = document.getElementById('filetype').value.trim();
    const excl = document.getElementById('exclude').value.trim();
    const exact = document.getElementById('exact').checked;
    if (exact && q) q = '"' + q + '"';
    if (site) q += (q ? ' ' : '') + (site.startsWith('site:') ? site : 'site:' + site);
    if (ft)   q += ' filetype:' + ft;
    if (excl) q += ' ' + excl.split(/\s+/).filter(Boolean).map(w => w.startsWith('-') ? w : '-' + w).join(' ');
    return q;
  }

  function collectSelected(){
    return $$('input[type="checkbox"][data-eng]:checked').map(cb => cb.getAttribute('data-eng'))
      .map(id => ENGINES[id]).filter(Boolean);
  }

  function openAll(urls){
    if (!urls.length) return;
    const firstHere = document.getElementById('firstHere').checked;
    if (firstHere){
      const [first, ...rest] = urls;
      rest.forEach((u,i)=> setTimeout(()=> window.open(u, '_blank', 'noopener'), 200 + i*200));
      location.href = first;
      return;
    }
    let delay = 0;
    urls.forEach(u => { setTimeout(()=> window.open(u, '_blank', 'noopener'), delay); delay += 220; });
  }

  function runSearch(){
    const raw = document.getElementById('q').value;
    if (!raw.trim()) { document.getElementById('q').focus(); return; }
    const q = buildQuery(raw);

    const engines = collectSelected();
    const urls = engines.map(e => e.url.replace('{q}', encodeURIComponent(q)));

    if (engines.some(e => e.onion)){
      try{
        const ua = navigator.userAgent || '';
        const onChrome = /Chrome\//.test(ua) && !/Edg\//.test(ua);
        if (onChrome) alert('–ü—Ä—è–º—ã–µ .onion —Å—Å—ã–ª–∫–∏ –º–æ–≥—É—Ç –Ω–µ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –≤–Ω–µ Tor Browser.');
      }catch(_){}
    }

    openAll(urls);
  }

  document.getElementById('searchForm').addEventListener('submit', (e)=>{ e.preventDefault(); runSearch(); });
  document.getElementById('go').addEventListener('click', (e)=>{ e.preventDefault(); runSearch(); });
  </script>
</body>
</html>
